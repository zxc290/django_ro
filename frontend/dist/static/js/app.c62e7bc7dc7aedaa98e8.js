webpackJsonp([1],{"2pmQ":function(e,t){},AUI1:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};r.d(a,"currentUser",function(){return H}),r.d(a,"isApplicant",function(){return Q}),r.d(a,"isApprover",function(){return Z}),r.d(a,"isRoleManager",function(){return G}),r.d(a,"isRecordChecker",function(){return J}),r.d(a,"isLogin",function(){return Y});var n={};r.d(n,"userStatus",function(){return W}),r.d(n,"userToken",function(){return K});var o={};r.d(o,"setUser",function(){return ee}),r.d(o,"setToken",function(){return te});var l=r("rVsN"),s=r.n(l),i=r("PVEY"),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var u=r("C7Lr")({name:"App"},c,!1,function(e){r("AUI1")},null,null).exports,m=r("KGCO"),p={name:"Home",data:function(){return{isApplicant:!1,isApprover:!1,isRoleManager:!1,isRecordChecker:!1}},methods:{handleOpen:function(e,t){},handleClose:function(e,t){}},created:function(){this.isApplicant=sessionStorage.getItem("isApplicant"),this.isApprover=sessionStorage.getItem("isApprover"),this.isRoleManager=sessionStorage.getItem("isRoleManager"),this.isRecordChecker=sessionStorage.getItem("isRecordChecker")}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("el-row",[r("el-col",[r("h3",[e._v("Ro运营后台管理")])])],1)],1),e._v(" "),r("el-container",[r("el-aside",{attrs:{width:"300px"}},[r("el-col",[r("h3",[e._v("导航菜单")]),e._v(" "),r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1",router:""},on:{open:e.handleOpen,close:e.handleClose}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v("福利发放管理")])]),e._v(" "),e.isApplicant?r("el-menu-item",{attrs:{index:"2-1",route:{name:"apply"}}},[e._v("申请")]):e._e(),e._v(" "),e.isApprover?r("el-menu-item",{attrs:{index:"2-2",route:{name:"examine"}}},[e._v("审批")]):e._e(),e._v(" "),e.isRecordChecker?r("el-menu-item",{attrs:{index:"2-3",route:{name:"record"}}},[e._v("福利记录")]):e._e(),e._v(" "),e.isRoleManager?r("el-menu-item",{attrs:{index:"2-4",route:{name:"role_management"}}},[e._v("角色管理")]):e._e()],2)],1)],1)],1),e._v(" "),r("el-main",[r("router-view")],1)],1)],1)},staticRenderFns:[]};var f=r("C7Lr")(p,d,!1,function(e){r("Wu2G")},"data-v-2c736819",null).exports,h=r("aozt"),g=r.n(h),b="http://data.7cool.xgd666.com:10050",_=function(){return g.a.get(b+"/app_platforms")},v=function(){return g.a.get(b+"/app_servers")},y=function(){return g.a.get(b+"/welfares/")},w=function(){return g.a.get(b+"/role_players/")},F={name:"Login",data:function(){return{logining:!1,loginForm:{account:"",checkPass:""},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},beforeRouteEnter:function(e,t,r){r(function(e){e.$store.dispatch("setUser",null)})},methods:{handleReset:function(){this.$refs.loginForm.resetFields()},handleSubmit:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return!1;e.logining=!0;var r,a={username:e.loginForm.account,password:e.loginForm.checkPass};(r=a,g.a.post(b+"/login",r)).then(function(t){var r=t.data;if(1===r.code){e.$message.success({message:r.message,showClose:!0});var a=r.user_info;sessionStorage.setItem("userId",a.user_id),sessionStorage.setItem("userName",a.username),sessionStorage.setItem("isApplicant",a.is_applicant),sessionStorage.setItem("isApprover",a.is_approver),sessionStorage.setItem("isRoleManager",a.is_role_manager),sessionStorage.setItem("isRecordChecker",a.is_record_checker),sessionStorage.setItem("userToken",r.token),e.$store.dispatch("setUser",a),e.$store.dispatch("setToken",r.token),e.$router.push({path:"/"})}else 0===r.code&&e.$message({message:r.message,showClose:!0,type:"error"});e.logining=!1})})}}},k={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{attrs:{offset:9,span:6}},[r("el-form",{ref:"loginForm",staticClass:"demo-ruleForm login-container",attrs:{model:e.loginForm,rules:e.rules,"label-position":"left","label-width":"0px"}},[r("h3",{staticClass:"title"},[e._v("ro运营管理工具登录")]),e._v(" "),r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.checkPass,callback:function(t){e.$set(e.loginForm,"checkPass",t)},expression:"loginForm.checkPass"}})],1),e._v(" "),r("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),r("el-form-item",{staticStyle:{width:"100%","margin-top":"20px"}},[r("el-button",{attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("登录\n      ")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.handleReset(t)}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var A=r("C7Lr")(F,k,!1,function(e){r("mZRJ")},"data-v-2861cf08",null).exports,P={name:"Apply",data:function(){return{platformOptions:[],zoneOptions:[],roleNameOptions:[],newApplyForm:{pid:"",zid:"",role_name:"",applicant_id:0,amount:"",is_regular:!1,regular_period:0},newApplyFormRules:{pid:[{required:!0,message:"请选择游戏平台",trigger:"change"}],zid:[{required:!0,message:"请选择游戏区服",trigger:"change"}],role_name:[{required:!0,message:"请输入游戏角色名",trigger:"blur"}],amount:[{required:!0,message:"请输入申请数量"},{type:"number",message:"必须为数字值"},{pattern:/^\d{1,3}$/,message:"输入范围1-999"}],regular_period:[{required:!0,message:"请输入固定周期"},{type:"number",message:"必须为数字值"},{pattern:/^\d{1,3}$/,message:"输入范围1-999"}]},newApplyFormLabelPosition:"left",newApplyFormVisible:!1,applyTableData:[],search:""}},methods:{alertMessage:function(e,t){this.$message({showClose:!0,message:e,type:t})},clickAdd:function(){this.newApplyFormVisible=!0},isRegularChange:function(e){this.newApplyForm.regularPeriod=0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){var r;e&&(t.newApplyForm.applicant_id=Number(sessionStorage.getItem("userId")),(r=t.newApplyForm,g.a.post(b+"/welfares/",r)).then(function(e){201===e.status&&(t.applyTableData.push(e.data),t.alertMessage("添加申请成功","success"))}).catch(function(e){t.alertMessage(e.message,"error")}),t.newApplyFormVisible=!1)})},resetForm:function(e){this.$refs[e].resetFields()},handleChangePlatform:function(e){var t=this;v().then(function(e){var r=e.data;t.zoneOptions=r.filter(function(e){return 50===e.gid&&e.pid===t.newApplyForm.pid})})},handleChangeZone:function(e){var t=this;w().then(function(e){var r=e.data;t.roleNameOptions=r.filter(function(e){return e.pid===t.newApplyForm.pid&&e.zid===t.newApplyForm.zid})})},handleDelete:function(e,t){var r=this;if(0!==t.status)return this.alertMessage("只能撤销审核中的申请","warning"),!1;this.$confirm("撤销申请后将无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,g.a.delete(b+"/welfares/"+e+"/")).then(function(e){204===e.status?(r.applyTableData=r.applyTableData.filter(function(e){return e.id!==t.id}),r.alertMessage("撤销成功","success")):202===e.status&&r.alertMessage(e.data,"warning")}).catch(function(e){r.alertMessage(e.message,"error")})}).catch(function(){})},dateFormatter:function(e,t,r,a){return r?r.replace("T"," "):"/"},boolFormatter:function(e,t,r,a){return r?"是":"否"},nullFormatter:function(e,t,r,a){return r||"/"},applyStatusFormatter:function(e,t,r,a){return 0===r?"审核中":1===r?"已通过":2===r?"未通过":void 0}},created:function(){var e=this;y().then(function(t){var r=t.data;e.applyTableData=r.filter(function(e){return e.applicant_id===Number(sessionStorage.getItem("userId"))&&0===e.status})}).catch(function(e){}),_().then(function(t){var r=t.data;e.platformOptions=r.filter(function(e){return 50===e.gid&&e.pid>0})}).catch(function(e){})}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{staticStyle:{float:"left","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.clickAdd}},[e._v("新增申请")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.applyTableData.filter(function(t){return!e.search||t.role_name.toLowerCase().includes(e.search.toLowerCase())}),size:"small",border:""}},[e._e(),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"平台名",prop:"pname",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"区服名",prop:"zname",align:"center",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"角色名",prop:"role_name",align:"center","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"是否固定发放",prop:"is_regular",align:"center",formatter:e.boolFormatter,"min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"固定发放周期(天)",prop:"regular_period",align:"center",formatter:e.nullFormatter,"min-width":"120",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"申请数量",prop:"amount",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"applicant_name",align:"center","min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"申请日期",prop:"created_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"审核状态",prop:"status",align:"center",formatter:e.applyStatusFormatter,sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"审核人",prop:"approver_name",align:"center",formatter:e.nullFormatter,"min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"审核日期",prop:"approve_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{"min-width":"200",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("撤销")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"新增申请",visible:e.newApplyFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.newApplyFormVisible=t}}},[r("el-form",{ref:"newApplyForm",staticStyle:{width:"100%","margin-top":"30px"},attrs:{model:e.newApplyForm,rules:e.newApplyFormRules,"label-width":"140px","label-position":e.newApplyFormLabelPosition}},[r("el-form-item",{attrs:{label:"游戏平台",prop:"pid"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择游戏平台"},on:{change:e.handleChangePlatform},model:{value:e.newApplyForm.pid,callback:function(t){e.$set(e.newApplyForm,"pid",t)},expression:"newApplyForm.pid"}},e._l(e.platformOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.pname,value:e.pid}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏区服",prop:"zid"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择游戏区服"},on:{change:e.handleChangeZone},model:{value:e.newApplyForm.zid,callback:function(t){e.$set(e.newApplyForm,"zid",t)},expression:"newApplyForm.zid"}},e._l(e.zoneOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.sname,value:e.sid}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"角色名",prop:"role_name"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择游戏角色名"},model:{value:e.newApplyForm.role_name,callback:function(t){e.$set(e.newApplyForm,"role_name",t)},expression:"newApplyForm.role_name"}},e._l(e.roleNameOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.role_name,value:e.role_name}})}),1)],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"申请人id",prop:"applicant_id"}},[r("el-input",{attrs:{placeholder:"请输入申请人名"},model:{value:e.newApplyForm.applicant_id,callback:function(t){e.$set(e.newApplyForm,"applicant_id",t)},expression:"newApplyForm.applicant_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"申请数量",prop:"amount"}},[r("el-input",{attrs:{placeholder:"请输入0-999间的整数"},model:{value:e.newApplyForm.amount,callback:function(t){e.$set(e.newApplyForm,"amount",e._n(t))},expression:"newApplyForm.amount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否固定发放"}},[r("el-switch",{on:{change:e.isRegularChange},model:{value:e.newApplyForm.is_regular,callback:function(t){e.$set(e.newApplyForm,"is_regular",t)},expression:"newApplyForm.is_regular"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.newApplyForm.is_regular,expression:"newApplyForm.is_regular"}],attrs:{label:"固定发放周期(天)",prop:"regular_period"}},[r("el-input",{attrs:{placeholder:"请输入0-999间的整数"},model:{value:e.newApplyForm.regular_period,callback:function(t){e.$set(e.newApplyForm,"regular_period",e._n(t))},expression:"newApplyForm.regular_period"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("newApplyForm")}}},[e._v("提交申请")]),e._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.resetForm("newApplyForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var S=r("C7Lr")(P,x,!1,function(e){r("PfkX")},"data-v-1e8ecb20",null).exports,R=r("aA9S"),C=r.n(R),T={name:"Examine",data:function(){return{examineTableData:[],search:""}},methods:{alertMessage:function(e,t){this.$message({showClose:!0,message:e,type:t})},handleExamine:function(e,t,r){var a=this;if(0!==t.status)return this.alertMessage("只能对审核中的申请做修改","warning"),!1;this.$confirm("修改申请状态后将无法修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;C()(t,{status:r,approver_id:Number(sessionStorage.getItem("userId"))}),(e=t,g.a.put(b+"/welfares/"+e.id+"/",e)).then(function(e){a.examineTableData=a.examineTableData.filter(function(t){return t.id!==e.data.id})}).catch(function(e){}),1===r?a.alertMessage("已批准","success"):2===r&&a.alertMessage("已否决","success")}).catch(function(){})},dateFormatter:function(e,t,r,a){return r?r.replace("T"," "):"/"},boolFormatter:function(e,t,r,a){return r?"是":"否"},nullFormatter:function(e,t,r,a){return r||"/"},applyStatusFormatter:function(e,t,r,a){return 0===r?"审核中":1===r?"已通过":2===r?"未通过":void 0}},created:function(){var e=this;y().then(function(t){e.examineTableData=t.data.filter(function(e){return 0===e.status})}).catch(function(e){})}},$={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.examineTableData.filter(function(t){return!e.search||t.role_name.toLowerCase().includes(e.search.toLowerCase())}),size:"small",border:""}},[e._e(),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"平台名",prop:"pname",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"区服名",prop:"zname",align:"center",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"角色名",prop:"role_name",align:"center","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"是否固定发放",prop:"is_regular",align:"center",formatter:e.boolFormatter,"min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"固定发放周期(天)",prop:"regular_period",align:"center",formatter:e.nullFormatter,"min-width":"120",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"申请数量",prop:"amount",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"applicant_name",align:"center","min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"申请日期",prop:"created_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"审核状态",prop:"status",align:"center",formatter:e.applyStatusFormatter,sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"审核人",prop:"approver_name",align:"center",formatter:e.nullFormatter,"min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"审核日期",prop:"approve_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{"min-width":"200",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleExamine(t.$index,t.row,1)}}},[e._v("批准")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleExamine(t.$index,t.row,2)}}},[e._v("否决")])]}}])})],1)},staticRenderFns:[]};var z=r("C7Lr")(T,$,!1,function(e){r("2pmQ")},"data-v-f0a5840a",null).exports,I={name:"Record",data:function(){return{welfareRecordTableData:[],search:""}},methods:{dateFormatter:function(e,t,r,a){return r?r.replace("T"," "):"/"},boolFormatter:function(e,t,r,a){return r?"是":"否"},nullFormatter:function(e,t,r,a){return r||"/"},applyStatusFormatter:function(e,t,r,a){return 0===r?"审核中":1===r?"已通过":2===r?"未通过":void 0}},created:function(){var e=this;y().then(function(t){sessionStorage.getItem("isApplicant")&&(e.welfareRecordTableData=t.data.filter(function(e){return 0!==e.status&&e.applicant_id===Number(sessionStorage.getItem("userId"))})),sessionStorage.getItem("isApprover")&&(e.welfareRecordTableData=t.data.filter(function(e){return 0!==e.status}))}).catch(function(e){})}},M={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.welfareRecordTableData.filter(function(t){return!e.search||t.role_name.toLowerCase().includes(e.search.toLowerCase())}),size:"small",border:""}},[e._e(),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"平台名",prop:"pname",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"区服名",prop:"zname",align:"center",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"角色名",prop:"role_name",align:"center","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"是否固定发放",prop:"is_regular",align:"center",formatter:e.boolFormatter,"min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"固定发放周期(天)",prop:"regular_period",align:"center",formatter:e.nullFormatter,"min-width":"120",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"申请数量",prop:"amount",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"applicant_name",align:"center","min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"申请日期",prop:"created_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"审核状态",prop:"status",align:"center",formatter:e.applyStatusFormatter,sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"审核人",prop:"approver_name",align:"center",formatter:e.nullFormatter,"min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"审核日期",prop:"approve_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{"min-width":"200",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}])})],1)},staticRenderFns:[]};var L=r("C7Lr")(I,M,!1,function(e){r("Quut")},"data-v-28c9290b",null).exports,D={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("1111111111111111111111111111111")])},staticRenderFns:[]};var O=r("C7Lr")({name:"test"},D,!1,function(e){r("YSww")},"data-v-6fc0032c",null).exports,E={name:"RolePlayer",data:function(){return{rolePlayerTableData:[],search:"",platformOptions:[],zoneOptions:[],rolePlayerFormTitle:"",rolePlayerFormVisible:!1,rolePlayerFormLabelPosition:"left",rolePlayerForm:{id:"",pid:"",zid:"",role_name:"",user_name:"",is_active:!0,creator_id:0},rolePlayerFormRules:{pid:[{required:!0,message:"请选择游戏平台",trigger:"change"}],zid:[{required:!0,message:"请选择游戏区服",trigger:"change"}],role_name:[{required:!0,message:"请输入游戏角色名"}],user_name:[{required:!0,message:"请输入使用人"}]}}},methods:{alertMessage:function(e,t){this.$message({showClose:!0,message:e,type:t})},clickAdd:function(){this.rolePlayerFormTitle="新增人员角色",this.rolePlayerForm.id="",this.rolePlayerFormVisible=!0},handleEdit:function(e,t){this.rolePlayerFormTitle="编辑人员角色",this.rolePlayerFormVisible=!0,this.rolePlayerForm.id=t.id,this.rolePlayerForm.pid=t.pid,this.rolePlayerForm.zid=t.zid,this.rolePlayerForm.role_name=t.role_name,this.rolePlayerForm.user_name=t.user_name,this.rolePlayerForm.is_active=t.is_active},handleDelete:function(e,t){var r=this;this.$confirm("删除人员角色后将无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,g.a.delete(b+"/role_players/"+e+"/")).then(function(e){204===e.status&&(r.rolePlayerTableData=r.rolePlayerTableData.filter(function(e){return e.id!==t.id}),r.alertMessage("删除成功","success"))}).catch(function(e){})}).catch(function(){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){var r;e&&(t.rolePlayerForm.creator_id=Number(sessionStorage.getItem("userId")),t.rolePlayerForm.id?(r=t.rolePlayerForm,g.a.put(b+"/role_players/"+r.id+"/",r)).then(function(e){202===e.status?t.alertMessage(e.data,"warning"):(C()(t.rolePlayerTableData.find(function(e){return e.id===t.rolePlayerForm.id}),e.data),t.alertMessage("修改人员角色成功","success"),t.rolePlayerFormVisible=!1)}):function(e){return g.a.post(b+"/role_players/",e)}(t.rolePlayerForm).then(function(e){201===e.status?(t.rolePlayerTableData.push(e.data),t.alertMessage("添加人员角色成功","success"),t.rolePlayerFormVisible=!1):202===e.status&&t.alertMessage(e.data,"warning")}).catch(function(e){t.alertMessage(e.message,"error")}))})},resetForm:function(e){this.$refs[e].resetFields()},handleChangePlatform:function(e){var t=this,r=e;v().then(function(e){var a=e.data;t.zoneOptions=a.filter(function(e){return 50===e.gid&&e.pid===r})})},dateFormatter:function(e,t,r,a){return r?r.replace("T"," "):"/"},boolFormatter:function(e,t,r,a){return r?"是":"否"},nullFormatter:function(e,t,r,a){return r||"/"},applyStatusFormatter:function(e,t,r,a){return 0===r?"审核中":1===r?"已通过":2===r?"未通过":void 0}},created:function(){var e=this;w().then(function(t){e.rolePlayerTableData=t.data}).catch(function(e){}),_().then(function(t){var r=t.data;e.platformOptions=r.filter(function(e){return 50===e.gid&&e.pid>0})}).catch(function(e){})}},N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{staticStyle:{float:"left","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.clickAdd}},[e._v("新增人员角色")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolePlayerTableData.filter(function(t){return!e.search||t.role_name.toLowerCase().includes(e.search.toLowerCase())}),size:"small",border:""}},[e._e(),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"平台名",prop:"pname",align:"center",sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"区服名",prop:"zname",align:"center",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"角色名",prop:"role_name",align:"center","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"使用人",prop:"user_name",align:"center",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"是否激活",prop:"is_active",align:"center",formatter:e.boolFormatter,sortable:""}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"修改人",prop:"creator_name",align:"center","min-width":"100",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"修改日期",prop:"modify_date",align:"center",formatter:e.dateFormatter,"min-width":"150","show-overflow-tooltip":"",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{"min-width":"200",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:e.rolePlayerFormTitle,visible:e.rolePlayerFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.rolePlayerFormVisible=t}}},[r("el-form",{ref:"rolePlayerForm",staticStyle:{width:"100%","margin-top":"30px"},attrs:{model:e.rolePlayerForm,rules:e.rolePlayerFormRules,"label-width":"140px","label-position":e.rolePlayerFormLabelPosition}},[r("el-form-item",{attrs:{label:"游戏平台",prop:"pid"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择游戏平台"},on:{change:e.handleChangePlatform},model:{value:e.rolePlayerForm.pid,callback:function(t){e.$set(e.rolePlayerForm,"pid",t)},expression:"rolePlayerForm.pid"}},e._l(e.platformOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.pname,value:e.pid}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏区服",prop:"zid"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择游戏区服"},model:{value:e.rolePlayerForm.zid,callback:function(t){e.$set(e.rolePlayerForm,"zid",t)},expression:"rolePlayerForm.zid"}},e._l(e.zoneOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.sname,value:e.sid}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"角色名",prop:"role_name"}},[r("el-input",{attrs:{placeholder:"请输入角色名"},model:{value:e.rolePlayerForm.role_name,callback:function(t){e.$set(e.rolePlayerForm,"role_name",t)},expression:"rolePlayerForm.role_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"使用人",prop:"user_name"}},[r("el-input",{attrs:{placeholder:"请输入使用人"},model:{value:e.rolePlayerForm.user_name,callback:function(t){e.$set(e.rolePlayerForm,"user_name",t)},expression:"rolePlayerForm.user_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否激活"}},[r("el-switch",{model:{value:e.rolePlayerForm.is_active,callback:function(t){e.$set(e.rolePlayerForm,"is_active",t)},expression:"rolePlayerForm.is_active"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("rolePlayerForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.resetForm("rolePlayerForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var V=r("C7Lr")(E,N,!1,function(e){r("SLw1")},"data-v-5ea6981b",null).exports;i.default.use(m.a);var q=new m.a({routes:[{path:"/",name:"Home",component:f,children:[{path:"welfare_management/apply",name:"apply",component:S,props:!0},{path:"welfare_management/examine",name:"examine",component:z,props:!0},{path:"welfare_management/record",name:"record",component:L,props:!0},{path:"welfare_management/role_management",name:"role_management",component:V,props:!0},{path:"test",name:"test",component:O,props:!0}]},{path:"/login",name:"Login",component:A}]});q.beforeEach(function(e,t,r){if("/login"===e.path)r();else{var a=sessionStorage.getItem("userToken");null===a||""===a?r("/login"):r()}});var U=q,B=r("R2wu"),X=r.n(B),j=(r("XEXE"),r("R4Sj")),H=function(e){return e.currentUser},Q=function(e){return e.isApplicant},Z=function(e){return e.isApprover},G=function(e){return e.isRoleManager},J=function(e){return e.isRecordChecker},Y=function(e){return e.isLogin},W=function(e,t){t?(e.currentUserId=t.user_id,e.currentUser=t.username,e.isApplicant=t.is_applicant,e.isApprover=t.is_approver,e.isRoleManager=t.is_role_manager,e.isRecordChecker=t.is_record_checker,e.isLogin=!0):null===t&&(sessionStorage.setItem("userId",null),sessionStorage.setItem("userName",null),sessionStorage.setItem("isApplicant",!1),sessionStorage.setItem("isApprover",!1),sessionStorage.setItem("isRoleManager",!1),sessionStorage.setItem("isRecordChecker",!1),sessionStorage.setItem("userToken",""),e.currentUser=null,e.isApplicant=!1,e.isApprover=!1,e.isRoleManager=!1,e.isRecordChecker=!1,e.isLogin=!1,e.token="")},K=function(e,t){e.token=t||null},ee=function(e,t){(0,e.commit)("userStatus",t)},te=function(e,t){(0,e.commit)("userToken",t)};i.default.use(j.a);var re=new j.a.Store({state:{currentUser:null,isApplicant:!1,isApprover:!1,isRoleManager:!1,isRecordChecker:!1,isLogin:!1,token:""},getters:a,mutations:n,actions:o});i.default.use(X.a),i.default.prototype.$axios=g.a,i.default.config.productionTip=!1,g.a.interceptors.request.use(function(e){return sessionStorage.getItem("userToken")&&(e.headers.Authorization=sessionStorage.getItem("userToken")),e},function(e){return s.a.reject(e)}),g.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400)";break;case 401:e.message="未授权，请重新登录(401)";break;case 403:e.message="拒绝访问(403)",U.push({path:"/login"}),Object(B.Message)({showClose:!0,message:"token验证过期, 请重新登录",type:"error"});break;case 404:e.message="请求出错(404)";break;case 408:e.message="请求超时(408)";break;case 500:e.message="服务器错误(500)";break;case 501:e.message="服务未实现(501)";break;case 502:e.message="网络错误(502)";break;case 503:e.message="服务不可用(503)";break;case 504:e.message="网络超时(504)";break;case 505:e.message="HTTP版本不受支持(505)";break;default:e.message="连接出错("+e.response.status+")!"}else e.message="连接服务器失败!";return s.a.reject(e)}),new i.default({el:"#app",router:U,store:re,components:{App:u},template:"<App/>"})},PfkX:function(e,t){},Quut:function(e,t){},SLw1:function(e,t){},Wu2G:function(e,t){},XEXE:function(e,t){},YSww:function(e,t){},mZRJ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c62e7bc7dc7aedaa98e8.js.map